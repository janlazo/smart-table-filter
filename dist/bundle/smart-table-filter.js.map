{"version":3,"file":"smart-table-filter.js","sources":["../../node_modules/smart-table-operators/index.js","../../node_modules/smart-table-json-pointer/dist/smart-table-json-pointer.es.js","../src/index.js"],"sourcesContent":["export const swap = f => (a, b) => f(b, a);\n\nexport const compose = (first, ...fns) => (...args) => fns.reduce((previous, current) => current(previous), first(...args));\n\nexport const curry = (fn, arityLeft) => {\n\tconst arity = arityLeft || fn.length;\n\treturn (...args) => {\n\t\tconst argLength = args.length || 1;\n\t\tif (arity === argLength) {\n\t\t\treturn fn(...args);\n\t\t}\n\t\tconst func = (...moreArgs) => fn(...args, ...moreArgs);\n\t\treturn curry(func, arity - args.length);\n\t};\n};\n\nexport const apply = fn => (...args) => fn(...args);\n\nexport const tap = fn => arg => {\n\tfn(arg);\n\treturn arg;\n};\n","function pointer(path) {\n\tconst parts = path.split('.');\n\n\tfunction partial(obj = {}, parts = []) {\n\t\tconst p = parts.shift();\n\t\tconst current = obj[p];\n\t\treturn (current === undefined || parts.length === 0) ?\n\t\t\tcurrent : partial(current, parts);\n\t}\n\n\tfunction set(target, newTree) {\n\t\tlet current = target;\n\t\tconst [leaf, ...intermediate] = parts.reverse();\n\t\tfor (const key of intermediate.reverse()) {\n\t\t\tif (current[key] === undefined) {\n\t\t\t\tcurrent[key] = {};\n\t\t\t\tcurrent = current[key];\n\t\t\t}\n\t\t}\n\t\tcurrent[leaf] = Object.assign(current[leaf] || {}, newTree);\n\t\treturn target;\n\t}\n\n\treturn {\n\t\tget(target) {\n\t\t\treturn partial(target, [...parts]);\n\t\t},\n\t\tset\n\t};\n}\n\nexport default pointer;\n//# sourceMappingURL=smart-table-json-pointer.es.js.map\n","import { compose } from 'smart-table-operators';\nimport pointer from 'smart-table-json-pointer';\nvar Type;\n(function (Type) {\n    Type[\"BOOLEAN\"] = \"boolean\";\n    Type[\"NUMBER\"] = \"number\";\n    Type[\"DATE\"] = \"date\";\n    Type[\"STRING\"] = \"string\";\n})(Type || (Type = {}));\nconst typeExpression = (type) => {\n    switch (type) {\n        case Type.BOOLEAN:\n            return Boolean;\n        case Type.NUMBER:\n            return Number;\n        case Type.DATE:\n            return val => new Date(val);\n        case Type.STRING:\n            return compose(String, val => val.toLowerCase());\n        default:\n            return val => val;\n    }\n};\nexport var FilterOperator;\n(function (FilterOperator) {\n    FilterOperator[\"INCLUDES\"] = \"includes\";\n    FilterOperator[\"IS\"] = \"is\";\n    FilterOperator[\"IS_NOT\"] = \"isNot\";\n    FilterOperator[\"LOWER_THAN\"] = \"lt\";\n    FilterOperator[\"GREATER_THAN\"] = \"gt\";\n    FilterOperator[\"GREATER_THAN_OR_EQUAL\"] = \"gte\";\n    FilterOperator[\"LOWER_THAN_OR_EQUAL\"] = \"lte\";\n    FilterOperator[\"EQUALS\"] = \"equals\";\n    FilterOperator[\"NOT_EQUALS\"] = \"notEquals\";\n    FilterOperator[\"ANY_OF\"] = \"anyOf\";\n})(FilterOperator || (FilterOperator = {}));\nconst not = fn => input => !fn(input);\nconst is = value => input => Object.is(value, input);\nconst lt = value => input => input < value;\nconst gt = value => input => input > value;\nconst equals = value => input => value === input;\nconst includes = value => input => input.includes(value);\nconst anyOf = value => input => value.includes(input);\nconst operators = {\n    [\"includes\" /* INCLUDES */]: includes,\n    [\"is\" /* IS */]: is,\n    [\"isNot\" /* IS_NOT */]: compose(is, not),\n    [\"lt\" /* LOWER_THAN */]: lt,\n    [\"gte\" /* GREATER_THAN_OR_EQUAL */]: compose(lt, not),\n    [\"gt\" /* GREATER_THAN */]: gt,\n    [\"lte\" /* LOWER_THAN_OR_EQUAL */]: compose(gt, not),\n    [\"equals\" /* EQUALS */]: equals,\n    [\"notEquals\" /* NOT_EQUALS */]: compose(equals, not),\n    [\"anyOf\" /* ANY_OF */]: anyOf\n};\nconst every = fns => (...args) => fns.every(fn => fn(...args));\nexport const predicate = ({ value = '', operator = \"includes\" /* INCLUDES */, type }) => {\n    const typeIt = typeExpression(type);\n    const operateOnTyped = compose(typeIt, operators[operator]);\n    const predicateFunc = operateOnTyped(value);\n    return compose(typeIt, predicateFunc);\n};\n// Avoid useless filter lookup (improve perf)\nconst normalizeClauses = (conf) => {\n    const output = {};\n    const validPath = Object.keys(conf).filter(path => Array.isArray(conf[path]));\n    validPath.forEach(path => {\n        const validClauses = conf[path].filter(c => c.value !== '');\n        if (validClauses.length > 0) {\n            output[path] = validClauses;\n        }\n    });\n    return output;\n};\nexport const filter = (filter) => {\n    const normalizedClauses = normalizeClauses(filter);\n    const funcList = Object.keys(normalizedClauses).map(path => {\n        const getter = pointer(path).get;\n        const clauses = normalizedClauses[path].map(predicate);\n        return compose(getter, every(clauses));\n    });\n    const filterPredicate = every(funcList);\n    return array => array.filter(filterPredicate);\n};\n"],"names":["FilterOperator"],"mappings":";;;CAEO,MAAM,OAAO,GAAG,CAAC,KAAK,EAAE,GAAG,GAAG,KAAK,CAAC,GAAG,IAAI,KAAK,GAAG,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE,OAAO,KAAK,OAAO,CAAC,QAAQ,CAAC,EAAE,KAAK,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;;CCF5H,SAAS,OAAO,CAAC,IAAI,EAAE;CACvB,CAAC,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;;CAE/B,CAAC,SAAS,OAAO,CAAC,GAAG,GAAG,EAAE,EAAE,KAAK,GAAG,EAAE,EAAE;CACxC,EAAE,MAAM,CAAC,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC;CAC1B,EAAE,MAAM,OAAO,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;CACzB,EAAE,OAAO,CAAC,OAAO,KAAK,SAAS,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC;CACrD,GAAG,OAAO,GAAG,OAAO,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;CACrC,EAAE;;CAEF,CAAC,SAAS,GAAG,CAAC,MAAM,EAAE,OAAO,EAAE;CAC/B,EAAE,IAAI,OAAO,GAAG,MAAM,CAAC;CACvB,EAAE,MAAM,CAAC,IAAI,EAAE,GAAG,YAAY,CAAC,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;CAClD,EAAE,KAAK,MAAM,GAAG,IAAI,YAAY,CAAC,OAAO,EAAE,EAAE;CAC5C,GAAG,IAAI,OAAO,CAAC,GAAG,CAAC,KAAK,SAAS,EAAE;CACnC,IAAI,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;CACtB,IAAI,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC;CAC3B,IAAI;CACJ,GAAG;CACH,EAAE,OAAO,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,OAAO,CAAC,CAAC;CAC9D,EAAE,OAAO,MAAM,CAAC;CAChB,EAAE;;CAEF,CAAC,OAAO;CACR,EAAE,GAAG,CAAC,MAAM,EAAE;CACd,GAAG,OAAO,OAAO,CAAC,MAAM,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;CACtC,GAAG;CACH,EAAE,GAAG;CACL,EAAE,CAAC;CACH,CAAC;;CC3BD,IAAI,IAAI,CAAC;CACT,CAAC,UAAU,IAAI,EAAE;CACjB,IAAI,IAAI,CAAC,SAAS,CAAC,GAAG,SAAS,CAAC;CAChC,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,QAAQ,CAAC;CAC9B,IAAI,IAAI,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC;CAC1B,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,QAAQ,CAAC;CAC9B,CAAC,EAAE,IAAI,KAAK,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC;CACxB,MAAM,cAAc,GAAG,CAAC,IAAI,KAAK;CACjC,IAAI,QAAQ,IAAI;CAChB,QAAQ,KAAK,IAAI,CAAC,OAAO;CACzB,YAAY,OAAO,OAAO,CAAC;CAC3B,QAAQ,KAAK,IAAI,CAAC,MAAM;CACxB,YAAY,OAAO,MAAM,CAAC;CAC1B,QAAQ,KAAK,IAAI,CAAC,IAAI;CACtB,YAAY,OAAO,GAAG,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC;CACxC,QAAQ,KAAK,IAAI,CAAC,MAAM;CACxB,YAAY,OAAO,OAAO,CAAC,MAAM,EAAE,GAAG,IAAI,GAAG,CAAC,WAAW,EAAE,CAAC,CAAC;CAC7D,QAAQ;CACR,YAAY,OAAO,GAAG,IAAI,GAAG,CAAC;CAC9B,KAAK;CACL,CAAC,CAAC;AACF,CACA,CAAC,UAAU,cAAc,EAAE;CAC3B,IAAI,cAAc,CAAC,UAAU,CAAC,GAAG,UAAU,CAAC;CAC5C,IAAI,cAAc,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;CAChC,IAAI,cAAc,CAAC,QAAQ,CAAC,GAAG,OAAO,CAAC;CACvC,IAAI,cAAc,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC;CACxC,IAAI,cAAc,CAAC,cAAc,CAAC,GAAG,IAAI,CAAC;CAC1C,IAAI,cAAc,CAAC,uBAAuB,CAAC,GAAG,KAAK,CAAC;CACpD,IAAI,cAAc,CAAC,qBAAqB,CAAC,GAAG,KAAK,CAAC;CAClD,IAAI,cAAc,CAAC,QAAQ,CAAC,GAAG,QAAQ,CAAC;CACxC,IAAI,cAAc,CAAC,YAAY,CAAC,GAAG,WAAW,CAAC;CAC/C,IAAI,cAAc,CAAC,QAAQ,CAAC,GAAG,OAAO,CAAC;CACvC,CAAC,EAAEA,sBAAc,KAAKA,sBAAc,GAAG,EAAE,CAAC,CAAC,CAAC;CAC5C,MAAM,GAAG,GAAG,EAAE,IAAI,KAAK,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;CACtC,MAAM,EAAE,GAAG,KAAK,IAAI,KAAK,IAAI,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;CACrD,MAAM,EAAE,GAAG,KAAK,IAAI,KAAK,IAAI,KAAK,GAAG,KAAK,CAAC;CAC3C,MAAM,EAAE,GAAG,KAAK,IAAI,KAAK,IAAI,KAAK,GAAG,KAAK,CAAC;CAC3C,MAAM,MAAM,GAAG,KAAK,IAAI,KAAK,IAAI,KAAK,KAAK,KAAK,CAAC;CACjD,MAAM,QAAQ,GAAG,KAAK,IAAI,KAAK,IAAI,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;CACzD,MAAM,KAAK,GAAG,KAAK,IAAI,KAAK,IAAI,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;CACtD,MAAM,SAAS,GAAG;CAClB,IAAI,CAAC,UAAU,kBAAkB,QAAQ;CACzC,IAAI,CAAC,IAAI,YAAY,EAAE;CACvB,IAAI,CAAC,OAAO,gBAAgB,OAAO,CAAC,EAAE,EAAE,GAAG,CAAC;CAC5C,IAAI,CAAC,IAAI,oBAAoB,EAAE;CAC/B,IAAI,CAAC,KAAK,+BAA+B,OAAO,CAAC,EAAE,EAAE,GAAG,CAAC;CACzD,IAAI,CAAC,IAAI,sBAAsB,EAAE;CACjC,IAAI,CAAC,KAAK,6BAA6B,OAAO,CAAC,EAAE,EAAE,GAAG,CAAC;CACvD,IAAI,CAAC,QAAQ,gBAAgB,MAAM;CACnC,IAAI,CAAC,WAAW,oBAAoB,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC;CACxD,IAAI,CAAC,OAAO,gBAAgB,KAAK;CACjC,CAAC,CAAC;CACF,MAAM,KAAK,GAAG,GAAG,IAAI,CAAC,GAAG,IAAI,KAAK,GAAG,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;AAC/D,AAAY,OAAC,SAAS,GAAG,CAAC,EAAE,KAAK,GAAG,EAAE,EAAE,QAAQ,GAAG,UAAU,iBAAiB,IAAI,EAAE,KAAK;CACzF,IAAI,MAAM,MAAM,GAAG,cAAc,CAAC,IAAI,CAAC,CAAC;CACxC,IAAI,MAAM,cAAc,GAAG,OAAO,CAAC,MAAM,EAAE,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC;CAChE,IAAI,MAAM,aAAa,GAAG,cAAc,CAAC,KAAK,CAAC,CAAC;CAChD,IAAI,OAAO,OAAO,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC;CAC1C,CAAC,CAAC;CACF;CACA,MAAM,gBAAgB,GAAG,CAAC,IAAI,KAAK;CACnC,IAAI,MAAM,MAAM,GAAG,EAAE,CAAC;CACtB,IAAI,MAAM,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,IAAI,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;CAClF,IAAI,SAAS,CAAC,OAAO,CAAC,IAAI,IAAI;CAC9B,QAAQ,MAAM,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,KAAK,EAAE,CAAC,CAAC;CACpE,QAAQ,IAAI,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;CACrC,YAAY,MAAM,CAAC,IAAI,CAAC,GAAG,YAAY,CAAC;CACxC,SAAS;CACT,KAAK,CAAC,CAAC;CACP,IAAI,OAAO,MAAM,CAAC;CAClB,CAAC,CAAC;AACF,AAAY,OAAC,MAAM,GAAG,CAAC,MAAM,KAAK;CAClC,IAAI,MAAM,iBAAiB,GAAG,gBAAgB,CAAC,MAAM,CAAC,CAAC;CACvD,IAAI,MAAM,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI;CAChE,QAAQ,MAAM,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC;CACzC,QAAQ,MAAM,OAAO,GAAG,iBAAiB,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;CAC/D,QAAQ,OAAO,OAAO,CAAC,MAAM,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;CAC/C,KAAK,CAAC,CAAC;CACP,IAAI,MAAM,eAAe,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC;CAC5C,IAAI,OAAO,KAAK,IAAI,KAAK,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;CAClD,CAAC;;;;;;;;;;;"}